{"version":3,"names":["getConfiguration","xcodeProject","sourceDir","args","info","getInfo","mode","checkIfConfigurationExists","configurations","scheme","path","basename","name","extname","getBuildConfigurationFromXcScheme","interactive","selection","selectFromInteractiveMode","logger","isWorkspace","chalk","bold"],"sources":["../../../src/commands/buildIOS/getConfiguration.ts"],"sourcesContent":["import chalk from 'chalk';\nimport {IOSProjectInfo} from '@react-native-community/cli-types';\nimport {logger} from '@react-native-community/cli-tools';\nimport {selectFromInteractiveMode} from '../../tools/selectFromInteractiveMode';\nimport {getInfo} from '../../tools/getInfo';\nimport {checkIfConfigurationExists} from '../../tools/checkIfConfigurationExists';\nimport type {BuildFlags} from './buildOptions';\nimport {getBuildConfigurationFromXcScheme} from '../../tools/getBuildConfigurationFromXcScheme';\nimport path from 'path';\n\nexport async function getConfiguration(\n  xcodeProject: IOSProjectInfo,\n  sourceDir: string,\n  args: BuildFlags,\n) {\n  const info = getInfo();\n\n  if (args.mode) {\n    checkIfConfigurationExists(info?.configurations ?? [], args.mode);\n  }\n\n  let scheme =\n    args.scheme ||\n    path.basename(xcodeProject.name, path.extname(xcodeProject.name));\n  let mode =\n    args.mode ||\n    getBuildConfigurationFromXcScheme(scheme, 'Debug', sourceDir, info);\n\n  if (args.interactive) {\n    const selection = await selectFromInteractiveMode({\n      scheme,\n      mode,\n      info,\n    });\n\n    if (selection.scheme) {\n      scheme = selection.scheme;\n    }\n\n    if (selection.mode) {\n      mode = selection.mode;\n    }\n  }\n\n  logger.info(\n    `Found Xcode ${\n      xcodeProject.isWorkspace ? 'workspace' : 'project'\n    } \"${chalk.bold(xcodeProject.name)}\"`,\n  );\n\n  return {scheme, mode};\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAwB;AAEjB,eAAeA,gBAAgB,CACpCC,YAA4B,EAC5BC,SAAiB,EACjBC,IAAgB,EAChB;EACA,MAAMC,IAAI,GAAG,IAAAC,gBAAO,GAAE;EAEtB,IAAIF,IAAI,CAACG,IAAI,EAAE;IACb,IAAAC,sDAA0B,EAAC,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,cAAc,KAAI,EAAE,EAAEL,IAAI,CAACG,IAAI,CAAC;EACnE;EAEA,IAAIG,MAAM,GACRN,IAAI,CAACM,MAAM,IACXC,eAAI,CAACC,QAAQ,CAACV,YAAY,CAACW,IAAI,EAAEF,eAAI,CAACG,OAAO,CAACZ,YAAY,CAACW,IAAI,CAAC,CAAC;EACnE,IAAIN,IAAI,GACNH,IAAI,CAACG,IAAI,IACT,IAAAQ,oEAAiC,EAACL,MAAM,EAAE,OAAO,EAAEP,SAAS,EAAEE,IAAI,CAAC;EAErE,IAAID,IAAI,CAACY,WAAW,EAAE;IACpB,MAAMC,SAAS,GAAG,MAAM,IAAAC,oDAAyB,EAAC;MAChDR,MAAM;MACNH,IAAI;MACJF;IACF,CAAC,CAAC;IAEF,IAAIY,SAAS,CAACP,MAAM,EAAE;MACpBA,MAAM,GAAGO,SAAS,CAACP,MAAM;IAC3B;IAEA,IAAIO,SAAS,CAACV,IAAI,EAAE;MAClBA,IAAI,GAAGU,SAAS,CAACV,IAAI;IACvB;EACF;EAEAY,kBAAM,CAACd,IAAI,CACR,eACCH,YAAY,CAACkB,WAAW,GAAG,WAAW,GAAG,SAC1C,KAAIC,gBAAK,CAACC,IAAI,CAACpB,YAAY,CAACW,IAAI,CAAE,GAAE,CACtC;EAED,OAAO;IAACH,MAAM;IAAEH;EAAI,CAAC;AACvB"}